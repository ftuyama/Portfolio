!function(d,s){"use strict";var u;d.rails!==s&&d.error("jquery-ujs has already been loaded!");var t=d(document);d.rails=u={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return d("meta[name=csrf-token]").attr("content")},csrfParam:function(){return d("meta[name=csrf-param]").attr("content")},CSRFProtection:function(t){var e=u.csrfToken();e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){d('form input[name="'+u.csrfParam()+'"]').val(u.csrfToken())},fire:function(t,e,a){var n=d.Event(e);return t.trigger(n,a),!1!==n.result},confirm:function(t){return confirm(t)},ajax:function(t){return d.ajax(t)},href:function(t){return t[0].href},isRemote:function(t){return t.data("remote")!==s&&!1!==t.data("remote")},handleRemote:function(n){var t,e,a,r,i,o;if(u.fire(n,"ajax:before")){if(r=n.data("with-credentials")||null,i=n.data("type")||d.ajaxSettings&&d.ajaxSettings.dataType,n.is("form")){t=n.data("ujs:submit-button-formmethod")||n.attr("method"),e=n.data("ujs:submit-button-formaction")||n.attr("action"),a=d(n[0]).serializeArray();var l=n.data("ujs:submit-button");l&&(a.push(l),n.data("ujs:submit-button",null)),n.data("ujs:submit-button-formmethod",null),n.data("ujs:submit-button-formaction",null)}else n.is(u.inputChangeSelector)?(t=n.data("method"),e=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):n.is(u.buttonClickSelector)?(t=n.data("method")||"get",e=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):(t=n.data("method"),e=u.href(n),a=n.data("params")||null);return o={type:t||"GET",data:a,dataType:i,beforeSend:function(t,e){if(e.dataType===s&&t.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),!u.fire(n,"ajax:beforeSend",[t,e]))return!1;n.trigger("ajax:send",t)},success:function(t,e,a){n.trigger("ajax:success",[t,e,a])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,a){n.trigger("ajax:error",[t,e,a])},crossDomain:u.isCrossDomain(e)},r&&(o.xhrFields={withCredentials:r}),e&&(o.url=e),u.ajax(o)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var a=document.createElement("a");try{return a.href=t,a.href=a.href,!((!a.protocol||":"===a.protocol)&&!a.host||e.protocol+"//"+e.host==a.protocol+"//"+a.host)}catch(n){return!0}},handleMethod:function(t){var e=u.href(t),a=t.data("method"),n=t.attr("target"),r=u.csrfToken(),i=u.csrfParam(),o=d('<form method="post" action="'+e+'"></form>'),l='<input name="_method" value="'+a+'" type="hidden" />';i===s||r===s||u.isCrossDomain(e)||(l+='<input name="'+i+'" value="'+r+'" type="hidden" />'),n&&o.attr("target",n),o.hide().append(l).appendTo("body"),o.submit()},formElements:function(t,e){return t.is("form")?d(t[0].elements).filter(e):t.find(e)},disableFormElements:function(t){u.formElements(t,u.disableSelector).each(function(){u.disableFormElement(d(this))})},disableFormElement:function(t){var e,a;e=t.is("button")?"html":"val",(a=t.data("disable-with"))!==s&&(t.data("ujs:enable-with",t[e]()),t[e](a)),t.prop("disabled",!0),t.data("ujs:disabled",!0)},enableFormElements:function(t){u.formElements(t,u.enableSelector).each(function(){u.enableFormElement(d(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")!==s&&(t[e](t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.prop("disabled",!1),t.removeData("ujs:disabled")},allowAction:function(t){var e,a=t.data("confirm"),n=!1;if(!a)return!0;if(u.fire(t,"confirm")){try{n=u.confirm(a)}catch(r){(console.error||console.log).call(console,r.stack||r)}e=u.fire(t,"confirm:complete",[n])}return n&&e},blankInputs:function(t,e,a){var n,r,i,o=d(),l=e||"input,textarea",s=t.find(l),u={};return s.each(function(){(n=d(this)).is("input[type=radio]")?(i=n.attr("name"),u[i]||(0===t.find('input[type=radio]:checked[name="'+i+'"]').length&&(r=t.find('input[type=radio][name="'+i+'"]'),o=o.add(r)),u[i]=i)):(n.is("input[type=checkbox],input[type=radio]")?n.is(":checked"):!!n.val())===a&&(o=o.add(n))}),!!o.length&&o},nonBlankInputs:function(t,e){return u.blankInputs(t,e,!0)},stopEverything:function(t){return d(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(t){var e=t.data("disable-with");e!==s&&(t.data("ujs:enable-with",t.html()),t.html(e)),t.bind("click.railsDisable",function(t){return u.stopEverything(t)}),t.data("ujs:disabled",!0)},enableElement:function(t){t.data("ujs:enable-with")!==s&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable"),t.removeData("ujs:disabled")}},u.fire(t,"rails:attachBindings")&&(d.ajaxPrefilter(function(t,e,a){t.crossDomain||u.CSRFProtection(a)}),d(window).on("pageshow.rails",function(){d(d.rails.enableSelector).each(function(){var t=d(this);t.data("ujs:disabled")&&d.rails.enableFormElement(t)}),d(d.rails.linkDisableSelector).each(function(){var t=d(this);t.data("ujs:disabled")&&d.rails.enableElement(t)})}),t.on("ajax:complete",u.linkDisableSelector,function(){u.enableElement(d(this))}),t.on("ajax:complete",u.buttonDisableSelector,function(){u.enableFormElement(d(this))}),t.on("click.rails",u.linkClickSelector,function(t){var e=d(this),a=e.data("method"),n=e.data("params"),r=t.metaKey||t.ctrlKey;if(!u.allowAction(e))return u.stopEverything(t);if(!r&&e.is(u.linkDisableSelector)&&u.disableElement(e),u.isRemote(e)){if(r&&(!a||"GET"===a)&&!n)return!0;var i=u.handleRemote(e);return!1===i?u.enableElement(e):i.fail(function(){u.enableElement(e)}),!1}return a?(u.handleMethod(e),!1):void 0}),t.on("click.rails",u.buttonClickSelector,function(t){var e=d(this);if(!u.allowAction(e)||!u.isRemote(e))return u.stopEverything(t);e.is(u.buttonDisableSelector)&&u.disableFormElement(e);var a=u.handleRemote(e);return!1===a?u.enableFormElement(e):a.fail(function(){u.enableFormElement(e)}),!1}),t.on("change.rails",u.inputChangeSelector,function(t){var e=d(this);return u.allowAction(e)&&u.isRemote(e)?(u.handleRemote(e),!1):u.stopEverything(t)}),t.on("submit.rails",u.formSubmitSelector,function(t){var e,a,n=d(this),r=u.isRemote(n);if(!u.allowAction(n))return u.stopEverything(t);if(n.attr("novalidate")===s)if(n.data("ujs:formnovalidate-button")===s){if((e=u.blankInputs(n,u.requiredInputSelector,!1))&&u.fire(n,"ajax:aborted:required",[e]))return u.stopEverything(t)}else n.data("ujs:formnovalidate-button",s);if(r){if(a=u.nonBlankInputs(n,u.fileInputSelector)){setTimeout(function(){u.disableFormElements(n)},13);var i=u.fire(n,"ajax:aborted:file",[a]);return i||setTimeout(function(){u.enableFormElements(n)},13),i}return u.handleRemote(n),!1}setTimeout(function(){u.disableFormElements(n)},13)}),t.on("click.rails",u.formInputClickSelector,function(t){var e=d(this);if(!u.allowAction(e))return u.stopEverything(t);var a=e.attr("name"),n=a?{name:a,value:e.val()}:null,r=e.closest("form");0===r.length&&(r=d("#"+e.attr("form"))),r.data("ujs:submit-button",n),r.data("ujs:formnovalidate-button",e.attr("formnovalidate")),r.data("ujs:submit-button-formaction",e.attr("formaction")),r.data("ujs:submit-button-formmethod",e.attr("formmethod"))}),t.on("ajax:send.rails",u.formSubmitSelector,function(t){this===t.target&&u.disableFormElements(d(this))}),t.on("ajax:complete.rails",u.formSubmitSelector,function(t){this===t.target&&u.enableFormElements(d(this))}),d(function(){u.refreshCSRFTokens()}))}(jQuery);